<html>
  <head>
    <title>Todo App</title>
    <style>
      .hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <form id="form">
      <input id="desc" type="text" name="description" />
      <input type="submit" value="add" />
    </form>
    <span class="hidden" id="error">Somethihng went wrong</span>
    <ul id="list">
      {% for d in data %}
      <li>{{ d.description }}</li>
      {% endfor %}
    </ul>
  </body>

  <script>
    document.getElementById("form").onsubmit = function (e) {
      debugger;
      e.preventDefaut();
      fetch('/todo/create', {
        method: 'POST',
        body: JSON.stringify({
          description: document.getElementById("description").value,
        }),
        headers: {
          'Content-Type': 'application/json',
        },
      })
        .then(function (response) {
          return response.json();
        })
        .then(function (jsonresponse) {
          console.log(jsonresponse);
          const liItem = document.createElement("li");
          liItem.innerHTML = jsonResponse["description"];
          document.getElementById("list").appendChild(liItem);
          document.getElementById("error").classname = "hidden";
        })
        .catch(function () {
          document.getElementById("error").classname = "";
        });
    };
  </script>
</html>
